---
import { getCollection } from 'astro:content';
import Base from '@layouts/Base.astro';
import ProjectCard from '@components/ProjectCard.astro';
import { filterDrafts, sortByDate } from '@utils/index';

const allProjects = await getCollection('projects');
const publishedProjects = sortByDate(filterDrafts(allProjects));

// Featured: first 3 posts
const featuredProjects = publishedProjects.slice(0, 3);

// Recent: next 6 posts
const recentProjects = publishedProjects.slice(3, 9);
---

<Base title="Home - Developer Portfolio" description="Welcome to my developer portfolio and blog">
  <!-- Hero Section -->
  <section class="mb-16">
    <h1 class="text-5xl font-bold text-white mb-4">
      Hi, I'm <span class="text-blue-400">Your Name</span>
    </h1>
    <p class="text-xl text-dark-muted max-w-2xl leading-relaxed">
      Software developer passionate about building elegant solutions to complex problems.
      I write about web development, TypeScript, and modern frontend architectures.
    </p>
  </section>

  <!-- Featured Projects -->
  {featuredProjects.length > 0 && (
    <section class="mb-16">
      <h2 class="text-3xl font-bold text-white mb-8 flex items-center">
        <span class="w-2 h-8 bg-blue-400 mr-4"></span>
        Featured Projects
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {featuredProjects.map(project => (
          <ProjectCard project={project} />
        ))}
      </div>
    </section>
  )}

  <!-- Recent Projects -->
  {recentProjects.length > 0 && (
    <section>
      <h2 class="text-3xl font-bold text-white mb-8 flex items-center">
        <span class="w-2 h-8 bg-blue-400 mr-4"></span>
        Recent Projects
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {recentProjects.map(project => (
          <ProjectCard project={project} />
        ))}
      </div>
      <div class="mt-8 text-center">
        <a
          href="/projects"
          class="inline-block px-6 py-3 bg-blue-400 text-dark-bg font-semibold rounded-lg hover:bg-blue-500 transition-colors"
        >
          View All Projects â†’
        </a>
      </div>
    </section>
  )}

  <!-- Empty State -->
  {publishedProjects.length === 0 && (
    <div class="text-center py-16 border border-dashed border-dark-border rounded-lg">
      <p class="text-dark-muted text-lg">
        No projects yet. Start by creating markdown files in <code class="text-pink-400">src/content/projects/</code>
      </p>
    </div>
  )}
</Base>
